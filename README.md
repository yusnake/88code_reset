# 88code è®¢é˜…è‡ªåŠ¨é‡ç½®å·¥å…·

[![License: MIT](https://img.shields.io/badge/License-MIT-yellow.svg)](https://opensource.org/licenses/MIT)

è¿™æ˜¯ä¸€ä¸ªåŸºäº Go è¯­è¨€å¼€å‘çš„è‡ªåŠ¨åŒ–å·¥å…·ï¼Œç”¨äºåœ¨æ¯å¤©çš„å›ºå®šæ—¶é—´è‡ªåŠ¨é‡ç½® 88code.org è®¢é˜…ç§¯åˆ†ã€‚æ”¯æŒ FREEã€PROã€PLUS ç­‰å¤šç§å¥—é¤ç±»å‹ï¼Œå¹¶å…·æœ‰ PAYGO ä¿æŠ¤æœºåˆ¶ã€‚

## åŠŸèƒ½ç‰¹æ€§

### æ ¸å¿ƒåŠŸèƒ½
- âœ… **å¤šè´¦å·æ”¯æŒ**: æ”¯æŒå¯¼å…¥å’Œç®¡ç†å¤šä¸ªè´¦å·ï¼Œé€šè¿‡ employeeEmail è‡ªåŠ¨å»é‡
- âœ… **å¤šå¥—é¤æ”¯æŒ**: æ”¯æŒ FREEã€PROã€PLUS æˆ–è‡ªå®šä¹‰å¥—é¤åç§°
- âœ… **PAYGO ä¿æŠ¤**: è‡ªåŠ¨æ£€æµ‹å¹¶æ‹’ç»é‡ç½® PAYGO ç±»å‹è®¢é˜…ï¼Œç¡®ä¿å®‰å…¨
- âœ… **å®šæœŸç›‘æ§**: æ¯å°æ—¶æ£€æŸ¥è®¢é˜…çŠ¶æ€ï¼ŒåŠæ—¶å‘ç°é—®é¢˜
- âœ… **è‡ªåŠ¨é‡ç½®**: æ¯å¤© 18:50 å’Œ 23:55 è‡ªåŠ¨æ‰§è¡Œé‡ç½®
- âœ… **å¹¶å‘é‡ç½®**: å¤šè´¦å·æ¨¡å¼ä¸‹å¹¶å‘å¤„ç†æ‰€æœ‰è´¦å·ï¼Œæé«˜æ•ˆç‡
- âœ… **æ—¶åŒºé…ç½®**: å†…ç½®æ—¶åŒºè®¾ç½®ï¼Œé»˜è®¤ UTC+8ï¼Œæ”¯æŒè‡ªå®šä¹‰æ—¶åŒº
- âœ… **æ™ºèƒ½æ£€æŸ¥**: ä»…åœ¨ `resetTimes >= 2` æ—¶æ‰§è¡Œé‡ç½®
- âœ… **é—´éš”æ§åˆ¶**: ä¸¤æ¬¡é‡ç½®è‡³å°‘é—´éš” 5 å°æ—¶
- âœ… **çŠ¶æ€æŒä¹…åŒ–**: å®Œæ•´è®°å½•è´¦å·ä¿¡æ¯å’Œæ‰§è¡ŒçŠ¶æ€ï¼ˆæ”¯æŒå¤šè´¦å·ç‹¬ç«‹çŠ¶æ€ï¼‰
- âœ… **å¹¶å‘ä¿æŠ¤**: é˜²é‡å¤æ‰§è¡Œçš„é”æœºåˆ¶
- âœ… **è¯¦ç»†æ—¥å¿—**: å®Œå–„çš„æ—¥å¿—è®°å½•ç³»ç»Ÿ

### éƒ¨ç½²æ–¹å¼
- âœ… **é¢„ç¼–è¯‘äºŒè¿›åˆ¶**: æ”¯æŒå¤šå¹³å°ï¼ˆLinuxã€macOSã€Windowsï¼‰å’Œå¤šæ¶æ„ï¼ˆamd64ã€arm64ã€armv7ï¼‰
- âœ… **Docker é•œåƒ**: å¤šæ¶æ„é•œåƒï¼ˆamd64ã€arm64ï¼‰
- âœ… **Zeabur éƒ¨ç½²**: æ— éœ€æœåŠ¡å™¨ï¼Œäº‘ç«¯æ‰˜ç®¡éƒ¨ç½²
- âœ… **Systemd æœåŠ¡**: Linux ç³»ç»ŸæœåŠ¡æ”¯æŒï¼Œå¼€æœºè‡ªå¯
- âœ… **çµæ´»é…ç½®**: ç¯å¢ƒå˜é‡å’Œ .env æ–‡ä»¶é…ç½®

### CI/CD
- âœ… **è‡ªåŠ¨æ„å»º**: GitHub Actions è‡ªåŠ¨æ„å»ºå’Œå‘å¸ƒ
- âœ… **å¤šå¹³å°å‘å¸ƒ**: è‡ªåŠ¨ç¼–è¯‘å¹¶å‘å¸ƒåˆ° GitHub Releases
- âœ… **Docker å‘å¸ƒ**: è‡ªåŠ¨æ„å»ºå¹¶å‘å¸ƒåˆ° GitHub Container Registry
- âœ… **æ ¡éªŒå’ŒéªŒè¯**: è‡ªåŠ¨ç”Ÿæˆ SHA256 æ ¡éªŒå’Œ


## å¿«é€Ÿå¼€å§‹

### å‰ç½®è¦æ±‚

- æœ‰æ•ˆçš„ 88code.org API Key
- ï¼ˆå¯é€‰ï¼‰Go 1.21+ ç”¨äºä»æºç ç¼–è¯‘
- ï¼ˆå¯é€‰ï¼‰Docker ç”¨äºå®¹å™¨åŒ–éƒ¨ç½²

### æ–¹å¼ 1: Zeabur éƒ¨ç½²ï¼ˆæœ€ç®€å•ï¼‰

æ— éœ€æœåŠ¡å™¨ï¼Œå®Œå…¨æ‰˜ç®¡çš„äº‘ç«¯éƒ¨ç½²æ–¹æ¡ˆã€‚

**éƒ¨ç½²æ­¥éª¤ï¼š**

1. å‰å¾€ [Zeabur Dashboard](https://dash.zeabur.com)
2. ç™»å½•æˆ–æ³¨å†Œè´¦å·ï¼ˆæ”¯æŒ GitHub ç™»å½•ï¼‰
3. åˆ›å»ºæ–°é¡¹ç›®
4. ç‚¹å‡» "Add Service" â†’ é€‰æ‹© "Git" â†’ æˆæƒå¹¶é€‰æ‹©æœ¬ä»“åº“
5. é€‰æ‹©éƒ¨ç½²åŒºåŸŸï¼ˆæ¨èï¼šAsia - Hong Kongï¼‰
6. åœ¨æœåŠ¡è®¾ç½®ä¸­æ·»åŠ ç¯å¢ƒå˜é‡ï¼š
   - `API_KEY`: ä½ çš„ 88code.org API Key **ï¼ˆå¿…å¡«ï¼‰**
   - `TARGET_PLANS`: ç›®æ ‡å¥—é¤ç±»å‹ï¼ˆé»˜è®¤ï¼š`FREE`ï¼‰
   - `TZ`: æ—¶åŒºè®¾ç½®ï¼ˆé»˜è®¤ï¼š`Asia/Shanghai`ï¼‰
7. ç­‰å¾… 1-2 åˆ†é’Ÿè‡ªåŠ¨æ„å»ºå¹¶éƒ¨ç½²å®Œæˆ

**ä¼˜åŠ¿ï¼š**
- âœ… æ— éœ€æœåŠ¡å™¨ï¼Œå®Œå…¨æ‰˜ç®¡
- âœ… è‡ªåŠ¨é‡å¯å’Œå¥åº·æ£€æŸ¥
- âœ… å†…ç½®æ—¥å¿—æŸ¥çœ‹å’Œç›‘æ§
- âœ… å…è´¹é¢åº¦è¶³å¤Ÿä½¿ç”¨
- âœ… æ”¯æŒæŒä¹…åŒ–å­˜å‚¨

### æ–¹å¼ 2: ä½¿ç”¨é¢„ç¼–è¯‘äºŒè¿›åˆ¶æ–‡ä»¶

ä» [Releases é¡µé¢](https://github.com/Vulpecula-Studio/88code_reset/releases) ä¸‹è½½é€‚åˆä½ ç³»ç»Ÿçš„ç‰ˆæœ¬ã€‚

**æ”¯æŒå¹³å°**ï¼šLinux (amd64/arm64/armv7)ã€macOS (Intel/Apple Silicon)ã€Windows (amd64/arm64)

```bash
# ä¸‹è½½ç¤ºä¾‹ï¼ˆä»¥ Linux amd64 ä¸ºä¾‹ï¼‰
wget https://github.com/Vulpecula-Studio/88code_reset/releases/latest/download/88code_reset-linux-amd64.tar.gz
tar xzf 88code_reset-linux-amd64.tar.gz
chmod +x 88code_reset-linux-amd64

# åˆ›å»ºé…ç½®æ–‡ä»¶
cat > .env << EOF
API_KEY=your_api_key_here
TARGET_PLANS=FREE
TZ=Asia/Shanghai
EOF

# æµ‹è¯•è¿è¡Œ
./88code_reset-linux-amd64 -mode=test

# å¯åŠ¨è°ƒåº¦å™¨
./88code_reset-linux-amd64 -mode=run
```

### æ–¹å¼ 3: ä»æºç è¿è¡Œ

éœ€è¦ Go 1.21+

```bash
# é…ç½® API Key
cp .env.example .env
# ç¼–è¾‘ .env æ–‡ä»¶ï¼Œå¡«å…¥ä½ çš„ API Key

# æµ‹è¯•è¿è¡Œ
go run cmd/reset/main.go -mode=test

# å¯åŠ¨è°ƒåº¦å™¨
go run cmd/reset/main.go -mode=run
```

### æ–¹å¼ 4: Docker éƒ¨ç½²

**Docker Compose**ï¼ˆæœ€ç®€å•ï¼‰
```bash
# é…ç½® API Key
cp .env.example .env
# ç¼–è¾‘ .env æ–‡ä»¶

# å¯åŠ¨æœåŠ¡
docker-compose up -d reset-scheduler

# æŸ¥çœ‹æ—¥å¿—
docker-compose logs -f reset-scheduler
```

**Docker å‘½ä»¤**
```bash
docker pull ghcr.io/vulpecula-studio/88code_reset:latest

# æµ‹è¯•æ¨¡å¼
docker run --rm -e API_KEY=your_key ghcr.io/vulpecula-studio/88code_reset:latest -mode=test

# åå°è¿è¡Œ
docker run -d --name 88code-reset \
  -e API_KEY=your_key \
  -v $(pwd)/data:/app/data \
  -v $(pwd)/logs:/app/logs \
  --restart unless-stopped \
  ghcr.io/vulpecula-studio/88code_reset:latest -mode=run
```

## è¿è¡Œæ¨¡å¼

### 1. æµ‹è¯•æ¨¡å¼ (test)

æµ‹è¯• API è¿æ¥å¹¶è·å–è®¢é˜…ä¿¡æ¯ï¼Œ**ä¸ä¼šæ‰§è¡Œé‡ç½®æ“ä½œ**ã€‚

```bash
go run cmd/reset/main.go -mode=test
```

è¾“å‡ºç¤ºä¾‹ï¼š
```
ã€æµ‹è¯• 1/3ã€‘æµ‹è¯• API è¿æ¥...
âœ… API è¿æ¥æµ‹è¯•é€šè¿‡

ã€æµ‹è¯• 2/3ã€‘è·å–è®¢é˜…åˆ—è¡¨...
âœ… è·å–åˆ° 2 ä¸ªè®¢é˜…

ã€æµ‹è¯• 3/3ã€‘æŸ¥æ‰¾ FREE è®¢é˜…...
âœ… æ‰¾åˆ° FREE è®¢é˜…

ç›®æ ‡è®¢é˜…è¯¦ç»†ä¿¡æ¯:
  ID: xxxxx
  å½“å‰ç§¯åˆ†: xx.xxxx / 20.00
  resetTimes: 2
  ...
```

### 2. è°ƒåº¦å™¨æ¨¡å¼ (run) - è‡ªåŠ¨é€‚é…å•è´¦å·/å¤šè´¦å·

å¯åŠ¨å®šæ—¶ä»»åŠ¡è°ƒåº¦å™¨ï¼Œåœ¨æŒ‡å®šæ—¶é—´è‡ªåŠ¨æ‰§è¡Œé‡ç½®ã€‚**è‡ªåŠ¨æ£€æµ‹å•è´¦å·æˆ–å¤šè´¦å·æ¨¡å¼**ã€‚

```bash
# å•è´¦å·æ¨¡å¼
export API_KEY=your_key
go run cmd/reset/main.go -mode=run

# å¤šè´¦å·æ¨¡å¼ï¼ˆè‡ªåŠ¨æ£€æµ‹ï¼‰
export API_KEY=key1,key2,key3
go run cmd/reset/main.go -mode=run

# æˆ–ä½¿ç”¨ API_KEYS
export API_KEYS=key1,key2,key3
go run cmd/reset/main.go -mode=run
```

é‡ç½®æ—¶é—´ï¼ˆåŸºäºé…ç½®çš„æ—¶åŒºï¼Œé»˜è®¤ä¸ºåŒ—äº¬æ—¶é—´ UTC+8ï¼‰ï¼š
- **ç¬¬ä¸€æ¬¡é‡ç½®**: æ¯å¤© 18:50
- **ç¬¬äºŒæ¬¡é‡ç½®**: æ¯å¤© 23:55

**å·¥ä½œæ¨¡å¼**ï¼š
- **å•ä¸ª API Key**ï¼šä½¿ç”¨ä¼ ç»Ÿçš„å•è´¦å·è°ƒåº¦å™¨
- **å¤šä¸ª API Keys**ï¼šè‡ªåŠ¨åˆ‡æ¢åˆ°å¤šè´¦å·è°ƒåº¦å™¨ï¼Œå¹¶å‘å¤„ç†æ‰€æœ‰è´¦å·

### 3. æ‰‹åŠ¨é‡ç½®æ¨¡å¼ (manual)

æ‰‹åŠ¨è§¦å‘ä¸€æ¬¡é‡ç½®æ“ä½œï¼Œ**éœ€è¦ç¡®è®¤åæ‰ä¼šæ‰§è¡Œ**ã€‚

```bash
# å•è´¦å·
go run cmd/reset/main.go -mode=manual

# å¤šè´¦å·æ—¶åªé‡ç½®ç¬¬ä¸€ä¸ª
export API_KEY=key1,key2,key3
go run cmd/reset/main.go -mode=manual  # åªé‡ç½® key1
```

æˆ–è·³è¿‡ç¡®è®¤æç¤ºï¼š
```bash
go run cmd/reset/main.go -mode=manual -yes
```

### 4. å¤šè´¦å·æ”¯æŒ ğŸ†•

**å®Œå…¨è‡ªåŠ¨åŒ–**ï¼šæ— éœ€åˆ‡æ¢æ¨¡å¼ï¼Œç³»ç»Ÿè‡ªåŠ¨è¯†åˆ«å•è´¦å·æˆ–å¤šè´¦å·ã€‚

#### æ ¸å¿ƒç‰¹æ€§

- âœ… **è‡ªåŠ¨æ£€æµ‹**ï¼šæ ¹æ®æä¾›çš„ API Keys æ•°é‡è‡ªåŠ¨é€‰æ‹©å•è´¦å·æˆ–å¤šè´¦å·æ¨¡å¼
- âœ… **ç»Ÿä¸€æ¥å£**ï¼š`API_KEY` æˆ– `API_KEYS` éƒ½æ”¯æŒå•ä¸ªæˆ–å¤šä¸ªï¼ˆé€—å·åˆ†éš”ï¼‰
- âœ… **æŒä¹…åŒ–è´¦å·ä¿¡æ¯**ï¼šæ›¾ç»ä½¿ç”¨çš„è´¦å·ä¿¡æ¯æ°¸ä¹…ä¿å­˜
- âœ… **çµæ´»å¯åœ**ï¼šé€šè¿‡ç¯å¢ƒå˜é‡æ§åˆ¶å“ªäº›è´¦å·æ‰§è¡Œé‡ç½®
- âœ… **è‡ªåŠ¨å»é‡**ï¼šé€šè¿‡ `employeeEmail` è‡ªåŠ¨è¯†åˆ«åŒä¸€è´¦å·
- âœ… **å¹¶å‘æ‰§è¡Œ**ï¼šå¤šè´¦å·å¹¶å‘å¤„ç†ï¼Œæé«˜æ•ˆç‡

#### ä½¿ç”¨æ–¹æ³•

**å•è´¦å·ï¼ˆä»¥ä¸‹ä»»æ„æ–¹å¼éƒ½å¯ä»¥ï¼‰**ï¼š
```bash
# æ–¹å¼ 1
export API_KEY=your_key
./reset -mode=run

# æ–¹å¼ 2
export API_KEYS=your_key
./reset -mode=run

# æ–¹å¼ 3
./reset -mode=run -apikey=your_key

# æ–¹å¼ 4
./reset -mode=run -apikeys=your_key
```

**å¤šè´¦å·ï¼ˆä»¥ä¸‹ä»»æ„æ–¹å¼éƒ½å¯ä»¥ï¼‰**ï¼š
```bash
# æ–¹å¼ 1ï¼šé€—å·åˆ†éš”
export API_KEY=key1,key2,key3
./reset -mode=run

# æ–¹å¼ 2
export API_KEYS=key1,key2,key3
./reset -mode=run

# æ–¹å¼ 3
./reset -mode=run -apikey=key1,key2,key3

# æ–¹å¼ 4
./reset -mode=run -apikeys=key1,key2,key3
```

**Docker éƒ¨ç½²**ï¼š
```bash
# å•è´¦å·
docker run -d -e API_KEY=your_key \
  -v $(pwd)/data:/app/data \
  ghcr.io/vulpecula-studio/88code_reset:latest -mode=run

# å¤šè´¦å·
docker run -d -e API_KEY=key1,key2,key3 \
  -v $(pwd)/data:/app/data \
  ghcr.io/vulpecula-studio/88code_reset:latest -mode=run
```

#### å·¥ä½œåŸç†

```
ç¯å¢ƒå˜é‡: API_KEY=key1,key2,key3
    â†“
[æ£€æµ‹æ•°é‡: 3ä¸ª] â†’ [è‡ªåŠ¨åˆ‡æ¢åˆ°å¤šè´¦å·æ¨¡å¼]
    â†“
[åŒæ­¥åˆ° accounts.json] â†’ [æŒ‰ç¯å¢ƒå˜é‡è¿‡æ»¤] â†’ [å¹¶å‘æ‰§è¡Œé‡ç½®]
    â†“                       â†“                    â†“
æŒä¹…åŒ–å†å²è´¦å·            è·å–æ´»è·ƒè´¦å·          åªé‡ç½®å½“å‰è´¦å·
```

**è¯´æ˜**ï¼š
1. **é¦–æ¬¡å¯åŠ¨**ï¼šç³»ç»Ÿé€šè¿‡ API è·å–è´¦å·ä¿¡æ¯å¹¶ä¿å­˜åˆ° `accounts.json`
2. **å†æ¬¡å¯åŠ¨**ï¼šæ›´æ–°æ´»è·ƒè´¦å·ä¿¡æ¯ï¼Œä½†ä¸åˆ é™¤å†å²è´¦å·
3. **ç§»é™¤è´¦å·**ï¼šä»ç¯å¢ƒå˜é‡ç§»é™¤ API Keyï¼Œè¯¥è´¦å·æš‚åœæ‰§è¡Œä½†ä¿¡æ¯ä¿ç•™
4. **æ¢å¤è´¦å·**ï¼šé‡æ–°åŠ å…¥ç¯å¢ƒå˜é‡ï¼Œè¯¥è´¦å·ç»§ç»­æ‰§è¡Œï¼ˆä¿ç•™å†å²çŠ¶æ€ï¼‰

#### æŸ¥çœ‹å†å²è´¦å·

```bash
./reset -mode=list
```

è¾“å‡ºç¤ºä¾‹ï¼š
```
è´¦å·ç»Ÿè®¡: å†å²æ€»è®¡ 5 ä¸ª

è´¦å· 1:
  é‚®ç®±: user1@example.com
  åç§°: User One
  ...
```

#### æ•°æ®å­˜å‚¨ç»“æ„

```
data/
â”œâ”€â”€ accounts.json                    # å†å²è´¦å·é…ç½®ï¼ˆæŒä¹…åŒ–ï¼‰
â””â”€â”€ accounts/                        # å„è´¦å·çš„ç‹¬ç«‹æ•°æ®
    â”œâ”€â”€ user1@example.com/
    â”‚   â”œâ”€â”€ account.json             # è´¦å·è¯¦ç»†ä¿¡æ¯
    â”‚   â””â”€â”€ status.json              # æ‰§è¡ŒçŠ¶æ€
    â””â”€â”€ user2@example.com/
        â”œâ”€â”€ account.json
        â””â”€â”€ status.json
```

## å‘½ä»¤è¡Œå‚æ•°

| å‚æ•° | é»˜è®¤å€¼ | è¯´æ˜ |
|------|--------|------|
| `-mode` | `test` | è¿è¡Œæ¨¡å¼: test/run/manual/list |
| `-apikey` | - | API Keyï¼Œæ”¯æŒå•ä¸ªæˆ–å¤šä¸ªï¼ˆé€—å·åˆ†éš”ï¼‰ |
| `-apikeys` | - | å¤šä¸ª API Keysï¼ˆé€—å·åˆ†éš”ï¼‰ï¼Œä¸ `-apikey` ç­‰æ•ˆ |
| `-baseurl` | `https://www.88code.org` | API Base URL |
| `-plans` | `FREE` | ç›®æ ‡å¥—é¤åç§°ï¼Œå¤šä¸ªç”¨é€—å·åˆ†éš”ï¼ˆå¦‚ï¼šFREE,PRO,PLUSï¼‰ |
| `-timezone` | `Asia/Shanghai` | æ—¶åŒºè®¾ç½®ï¼ˆå¦‚ï¼šAsia/Shanghai, Asia/Hong_Kong, UTCï¼‰ |
| `-datadir` | `./data` | æ•°æ®ç›®å½• |
| `-logdir` | `./logs` | æ—¥å¿—ç›®å½• |
| `-yes` | `false` | è·³è¿‡ç¡®è®¤æç¤ºï¼ˆä»…ç”¨äº manual æ¨¡å¼ï¼‰ |

**è¿è¡Œæ¨¡å¼è¯´æ˜**ï¼š
- `test`ï¼šæµ‹è¯•ç¬¬ä¸€ä¸ª API Key çš„è¿æ¥
- `run`ï¼šè‡ªåŠ¨è°ƒåº¦å™¨ï¼Œè‡ªåŠ¨æ£€æµ‹å•è´¦å·/å¤šè´¦å·æ¨¡å¼
- `manual`ï¼šæ‰‹åŠ¨é‡ç½®ç¬¬ä¸€ä¸ªè´¦å·
- `list`ï¼šæŸ¥çœ‹å†å²è´¦å·åˆ—è¡¨

**API Key å‚æ•°è¯´æ˜**ï¼š
- `-apikey` å’Œ `-apikeys` å®Œå…¨ç­‰æ•ˆï¼Œéƒ½æ”¯æŒå•ä¸ªæˆ–å¤šä¸ª
- å•ä¸ªï¼š`-apikey=your_key`
- å¤šä¸ªï¼š`-apikey=key1,key2,key3` æˆ– `-apikeys=key1,key2,key3`

### ç¤ºä¾‹

```bash
# ä»…é‡ç½® FREE å¥—é¤
go run cmd/reset/main.go -mode=test -plans=FREE

# é‡ç½® PRO å¥—é¤
go run cmd/reset/main.go -mode=run -plans=PRO

# é‡ç½®å¤šä¸ªå¥—é¤
go run cmd/reset/main.go -mode=run -plans=FREE,PRO,PLUS

# ä½¿ç”¨è‡ªå®šä¹‰æ—¶åŒº
go run cmd/reset/main.go -mode=run -timezone=Asia/Tokyo

# ä½¿ç”¨ UTC æ—¶åŒº
go run cmd/reset/main.go -mode=run -timezone=UTC
```

## é…ç½®æ–‡ä»¶

### .env æ–‡ä»¶

```bash
# API Keyï¼ˆå¿…å¡«ï¼‰
API_KEY=88_xxxxxxxxxxxx

# API Base URLï¼ˆå¯é€‰ï¼‰
BASE_URL=https://www.88code.org

# ç›®æ ‡è®¢é˜…è®¡åˆ’ï¼ˆå¯é€‰ï¼Œé»˜è®¤ä¸º FREEï¼‰
# æ”¯æŒå¤šä¸ªè®¡åˆ’ï¼Œç”¨é€—å·åˆ†éš”
TARGET_PLANS=FREE
# TARGET_PLANS=FREE,PRO
# TARGET_PLANS=PLUS

# æ—¶åŒºè®¾ç½®ï¼ˆå¯é€‰ï¼Œé»˜è®¤ä¸º Asia/Shanghai UTC+8ï¼‰
# æ”¯æŒæ ‡å‡†æ—¶åŒºåç§°ï¼Œç”¨äºæ§åˆ¶é‡ç½®æ—¶é—´
# ç¤ºä¾‹ï¼š
TZ=Asia/Shanghai          # åŒ—äº¬/ä¸Šæµ·æ—¶åŒº (UTC+8)
# TZ=Asia/Hong_Kong       # é¦™æ¸¯æ—¶åŒº (UTC+8)
# TZ=Asia/Tokyo           # ä¸œäº¬æ—¶åŒº (UTC+9)
# TZ=America/New_York     # çº½çº¦æ—¶åŒº (UTC-5/-4)
# TZ=Europe/London        # ä¼¦æ•¦æ—¶åŒº (UTC+0/+1)
# TZ=UTC                  # ä¸–ç•Œåè°ƒæ—¶
#
# æˆ–ä½¿ç”¨ TIMEZONE å˜é‡
# TIMEZONE=Asia/Shanghai
#
# é»˜è®¤é‡ç½®æ—¶é—´ä¸ºåŒ—äº¬æ—¶é—´ï¼š
# - ç¬¬ä¸€æ¬¡: 18:50
# - ç¬¬äºŒæ¬¡: 23:55

# è‡ªå®šä¹‰ .env æ–‡ä»¶è·¯å¾„ï¼ˆå¯é€‰ï¼‰
# é»˜è®¤è¯»å–å½“å‰å·¥ä½œç›®å½•ä¸‹çš„ .env
# å¦‚æœå¸Œæœ›ä½¿ç”¨å…¶ä»–è·¯å¾„ï¼Œå¯ä»¥è®¾ç½®ç¯å¢ƒå˜é‡ ENV_FILE
# ç¤ºä¾‹ï¼š
# export ENV_FILE=/etc/88code/app.env
# æˆ–é€šè¿‡å‘½ä»¤è¡ŒæŒ‡å®šï¼š
# ENV_FILE=/etc/88code/app.env go run cmd/reset/main.go -mode=run
```

æ”¯æŒçš„æ ¼å¼ï¼š
- `API_KEY=xxx` æˆ– `api-key=xxx`
- `TARGET_PLANS=xxx` æˆ–é€šè¿‡å‘½ä»¤è¡Œå‚æ•° `-plans=xxx`
- `TZ=xxx` æˆ– `TIMEZONE=xxx` æˆ–é€šè¿‡å‘½ä»¤è¡Œå‚æ•° `-timezone=xxx`
- `.env` åŠ è½½ä¼˜å…ˆçº§ï¼šå‘½ä»¤è¡Œå‚æ•° > ç¯å¢ƒå˜é‡ > `ENV_FILE` æŒ‡å‘çš„æ–‡ä»¶ > é»˜è®¤ `.env`

## æ ¸å¿ƒæœºåˆ¶

### é‡ç½®é€»è¾‘
- **è§¦å‘æ—¶é—´**: æ¯å¤© 18:50 å’Œ 23:55ï¼ˆå¯é…ç½®æ—¶åŒºï¼‰
- **è§¦å‘æ¡ä»¶**: `resetTimes >= 2`ï¼Œä¸”è¯¥æ—¶æ®µæœªæ‰§è¡Œ
- **é—´éš”ä¿æŠ¤**: ä¸¤æ¬¡é‡ç½®è‡³å°‘é—´éš” 5 å°æ—¶

### å®‰å…¨æœºåˆ¶
- **PAYGO ä¿æŠ¤**: åŒé‡æ£€æŸ¥ï¼Œæ°¸ä¸é‡ç½® PAYGO ç±»å‹è®¢é˜…
- **é”æ–‡ä»¶**: é˜²æ­¢å¹¶å‘æ‰§è¡Œ
- **çŠ¶æ€æŒä¹…åŒ–**: é˜²æ­¢é‡å¤é‡ç½®ï¼Œè®°å½•æ‰§è¡Œå†å²
- **åƒµå°¸é”æ¸…ç†**: è¶…è¿‡ 10 åˆ†é’Ÿè‡ªåŠ¨å¤±æ•ˆ

## æ•…éšœæ’æŸ¥

### API è¿æ¥å¤±è´¥

æ£€æŸ¥ï¼š
1. API Key æ˜¯å¦æ­£ç¡®
2. ç½‘ç»œè¿æ¥æ˜¯å¦æ­£å¸¸
3. Base URL æ˜¯å¦å¯è®¿é—®

### resetTimes ä¸è¶³

åŸå› ï¼š
- ä»Šå¤©çš„ä¸¤æ¬¡é‡ç½®æ¬¡æ•°å·²ç”¨å®Œ
- éœ€ç­‰å¾…æ¬¡æ—¥æˆ–è”ç³»å®¢æœ

### é”æ–‡ä»¶é—®é¢˜

å¦‚æœå‡ºç°"æ“ä½œæ­£åœ¨è¿›è¡Œä¸­"é”™è¯¯ï¼š
```bash
# æ‰‹åŠ¨æ¸…ç†é”æ–‡ä»¶
rm data/reset.lock
```

## Docker å¸¸ç”¨å‘½ä»¤

```bash
# æ„å»ºé•œåƒ
docker-compose build

# æŸ¥çœ‹çŠ¶æ€
docker-compose ps

# æŸ¥çœ‹æ—¥å¿—
docker-compose logs -f reset-scheduler

# é‡å¯æœåŠ¡
docker-compose restart reset-scheduler
```

## Systemd æœåŠ¡é…ç½®ï¼ˆLinuxï¼‰

åˆ›å»ºæœåŠ¡æ–‡ä»¶ `/etc/systemd/system/88code-reset.service`ï¼š

```ini
[Unit]
Description=88code Subscription Auto Reset Service
After=network.target

[Service]
Type=simple
User=your_username
WorkingDirectory=/path/to/88code_reset
ExecStart=/path/to/88code_reset/88code_reset-linux-amd64 -mode=run
Restart=always
RestartSec=10
StandardOutput=append:/path/to/88code_reset/logs/service.log
StandardError=append:/path/to/88code_reset/logs/service.log
Environment="API_KEY=your_api_key_here"
Environment="TZ=Asia/Shanghai"

[Install]
WantedBy=multi-user.target
```

å¯ç”¨æœåŠ¡ï¼š
```bash
sudo systemctl daemon-reload
sudo systemctl enable 88code-reset
sudo systemctl start 88code-reset
sudo systemctl status 88code-reset
```

### æœ¬åœ°ç¼–è¯‘

```bash
# å½“å‰å¹³å°
go build -o reset cmd/reset/main.go

# äº¤å‰ç¼–è¯‘ç¤ºä¾‹
GOOS=linux GOARCH=amd64 go build -o reset-linux-amd64 cmd/reset/main.go
GOOS=darwin GOARCH=arm64 go build -o reset-darwin-arm64 cmd/reset/main.go
GOOS=windows GOARCH=amd64 go build -o reset-windows-amd64.exe cmd/reset/main.go

# ä¼˜åŒ–ä½“ç§¯
CGO_ENABLED=0 go build -a -ldflags="-s -w" -o reset cmd/reset/main.go

# æµ‹è¯•å’Œæ ¼å¼åŒ–
go test ./...
go fmt ./...
```

## é«˜çº§é…ç½®

### æ—¶åŒºé…ç½®

ç¨‹åºå†…ç½®æ—¶åŒºè®¾ç½®ï¼Œæ— éœ€ä¾èµ–ç³»ç»Ÿæˆ–å®¹å™¨æ—¶åŒºã€‚é…ç½®ä¼˜å…ˆçº§ï¼šå‘½ä»¤è¡Œå‚æ•° > ç¯å¢ƒå˜é‡ > .env æ–‡ä»¶ > é»˜è®¤å€¼(Asia/Shanghai)

```bash
# å‘½ä»¤è¡Œæ–¹å¼
./88code_reset-linux-amd64 -mode=run -timezone=Asia/Tokyo

# ç¯å¢ƒå˜é‡æ–¹å¼
export TZ=Asia/Hong_Kong

# Docker æ–¹å¼
docker run -d -e TZ=Asia/Tokyo ...
```

### ä¿®æ”¹é‡ç½®æ—¶é—´

ç¼–è¾‘ [internal/scheduler/scheduler.go](internal/scheduler/scheduler.go) ä¸­çš„å¸¸é‡ï¼š
```go
FirstResetHour   = 18
FirstResetMinute = 50
SecondResetHour   = 23
SecondResetMinute = 55
```

## å¼€å‘è€…ä¿¡æ¯

### CI/CD

æœ¬é¡¹ç›®ä½¿ç”¨ GitHub Actions è‡ªåŠ¨åŒ–æ„å»ºï¼š

**è§¦å‘å‘å¸ƒ**
```bash
git tag v1.0.0
git push origin v1.0.0
```

**Workflows**
- [docker.yml](.github/workflows/docker.yml) - Docker é•œåƒï¼ˆlinux/amd64, linux/arm64ï¼‰
- [release.yml](.github/workflows/release.yml) - äºŒè¿›åˆ¶æ–‡ä»¶ï¼ˆLinux/macOS/Windowsï¼Œå¤šæ¶æ„ï¼‰

## è®¸å¯è¯

MIT License

## å‚ä¸è´¡çŒ®

æ¬¢è¿æäº¤ [Issue](https://github.com/Vulpecula-Studio/88code_reset/issues) å’Œ Pull Requestï¼

## å…è´£å£°æ˜

æœ¬å·¥å…·ä»…ä¾›å­¦ä¹ å’Œç ”ç©¶ä½¿ç”¨ï¼Œä½¿ç”¨è€…éœ€è‡ªè¡Œæ‰¿æ‹…ä½¿ç”¨é£é™©ã€‚
